CC = e-gcc
AR = e-ar
DEFS = -O3 -std=c11
INCS =
LIBS =

TARGETS = libshmem.a

SRC_FILES = $(wildcard *.c)
ASM_FILES = $(wildcard *.S)

OBJS = $(SRC_FILES:.c=.o) $(ASM_FILES:.S=.o)

all: $(TARGETS)

.PHONY: clean install uninstall

.SUFFIXES:
.SUFFIXES: .S .c .o 

.c.o:
	$(CC) $(CFLAGS) $(DEFS) $(INCS) $(LIBS) -c $<

libshmem.a: $(OBJS)
	$(AR) rcv $@ $(OBJS)

.S.o:
	e-gcc -c $<

clean:
	rm -f *.o

distclean: clean 
	rm -f $(TARGETS)
